<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Nomad - Currency & Time</title>
    <style>
        body {
            margin: 0; padding: 0;
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background: url('https://images.unsplash.com/photo-1488646953014-85cb44e25828?auto=format&fit=crop&w=1600&q=80') no-repeat center center fixed;
            background-size: cover;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; color: #333;
        }
        body::before {
            content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.3); z-index: 1;
        }
        .container {
            position: relative; z-index: 10;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px); padding: 2rem;
            border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            width: 90%; max-width: 450px; text-align: center;
        }
        /* タブデザイン */
        .tabs { display: flex; margin-bottom: 1.5rem; border-bottom: 2px solid #eee; }
        .tab { flex: 1; padding: 10px; cursor: pointer; color: #999; font-weight: bold; }
        .tab.active { color: #007bff; border-bottom: 2px solid #007bff; }
        
        .content { display: none; }
        .content.active { display: block; }

        .input-group { margin-bottom: 1rem; text-align: left; }
        label { display: block; font-size: 0.75rem; color: #666; margin-bottom: 3px; }
        select, input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; box-sizing: border-box; }
        
        button { width: 100%; padding: 15px; background: #007bff; color: white; border: none; border-radius: 8px; font-size: 1.1rem; cursor: pointer; margin-top: 10px; }
        
        .result-box { margin-top: 1.5rem; padding: 1.2rem; background: #f0f7ff; border-radius: 12px; font-size: 1.2rem; font-weight: bold; }
        .clock-display { font-size: 2rem; margin: 10px 0; color: #007bff; font-family: monospace; }
    </style>
</head>
<body>

<div class="container">
    <div class="tabs">
        <div class="tab active" onclick="showTab('currency')">通貨換算</div>
        <div class="tab" onclick="showTab('time')">世界時計</div>
    </div>

    <div id="currency" class="content active">
        <div class="input-group">
            <label>金額</label>
            <input type="number" id="amount" value="1000">
        </div>
        <div class="input-group">
            <label>変換元</label>
            <select id="fromCurr"></select>
        </div>
        <div class="input-group">
            <label>変換先</label>
            <select id="toCurr"></select>
        </div>
        <button onclick="calculateCurrency()">換算する</button>
        <div class="result-box" id="currResult">結果がここに表示されます</div>
    </div>

    <div id="time" class="content">
        <div class="input-group">
            <label>確認したい国・都市</label>
            <select id="timeSelect" onchange="updateClock()"></select>
        </div>
        <div class="result-box">
            <div id="cityName">東京 (日本)</div>
            <div class="clock-display" id="clock">00:00:00</div>
            <div style="font-size: 0.8rem; color: #666;" id="timeDiff">時差: --</div>
        </div>
    </div>
</div>

<script>
    const countries = [
        { name: "日本", curr: "JPY", code: "JPY", tz: "Asia/Tokyo" },
        { name: "アメリカ", curr: "ドル", code: "USD", tz: "America/New_York" },
        { name: "イギリス", curr: "ポンド", code: "GBP", tz: "Europe/London" },
        { name: "欧州連合", curr: "ユーロ", code: "EUR", tz: "Europe/Paris" },
        { name: "中国", curr: "元", code: "CNY", tz: "Asia/Shanghai" },
        { name: "韓国", curr: "ウォン", code: "KRW", tz: "Asia/Seoul" },
        { name: "台湾", curr: "ドル", code: "TWD", tz: "Asia/Taipei" },
        { name: "タイ", curr: "バーツ", code: "THB", tz: "Asia/Bangkok" },
        { name: "ベトナム", curr: "ドン", code: "VND", tz: "Asia/Ho_Chi_Minh" },
        { name: "オーストラリア", curr: "ドル", code: "AUD", tz: "Australia/Sydney" }
        // ... (実際にはここに50カ国分が入ります)
    ];

    // 初期化: セレクトボックスに国を追加
    function init() {
        const selects = [document.getElementById('fromCurr'), document.getElementById('toCurr'), document.getElementById('timeSelect')];
        countries.forEach(c => {
            selects.forEach(s => {
                const opt = document.createElement('option');
                opt.value = c.code;
                opt.textContent = `${c.name} / ${c.curr} (${c.code})`;
                if (s.id === 'timeSelect') opt.value = c.tz;
                s.appendChild(opt);
            });
        });
        updateClock();
    }

    // タブ切り替え
    function showTab(tabId) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
        event.target.classList.add('active');
        document.getElementById(tabId).classList.add('active');
    }

    // 通貨計算
    function calculateCurrency() {
        const rates = { "JPY": 1, "USD": 0.0066, "EUR": 0.0061, "GBP": 0.0053, "KRW": 8.8, "CNY": 0.047 };
        const amt = document.getElementById('amount').value;
        const from = document.getElementById('fromCurr').value;
        const to = document.getElementById('toCurr').value;
        const res = (amt / (rates[from] || 1)) * (rates[to] || 1);
        document.getElementById('currResult').textContent = `${Number(amt).toLocaleString()} ${from} = ${res.toLocaleString(undefined,{maximumFractionDigits:2})} ${to}`;
    }

    // 時計更新
    function updateClock() {
        const tz = document.getElementById('timeSelect').value;
        const options = { timeZone: tz, hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
        const now = new Intl.DateTimeFormat('ja-JP', options).format(new Date());
        document.getElementById('clock').textContent = now;
        
        const country = countries.find(c => c.tz === tz);
        document.getElementById('cityName').textContent = `${country.name} の現在時刻`;
        
        // 時差計算（簡易版）
        const local = new Date().getTimezoneOffset() / -60;
        document.getElementById('timeDiff').textContent = `現地との時差: ${tz === 'Asia/Tokyo' ? 'なし' : '計算中...'}`;
    }

    setInterval(updateClock, 1000);
    window.onload = init;
</script>

</body>
</html>
