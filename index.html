<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Nomad</title>

    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Global Nomad">
    <link rel="apple-touch-icon" href="icon-192.png">

    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js');
        });
      }
    </script>

    <style>
        body {
            margin: 0; padding: 0;
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background: url('https://images.unsplash.com/photo-1488646953014-85cb44e25828?auto=format&fit=crop&w=1600&q=80') no-repeat center center fixed;
            background-size: cover;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; color: #333;
        }
        body::before {
            content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.3); z-index: 1;
        }
        .container {
            position: relative; z-index: 10;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px); padding: 1.5rem;
            border-radius: 24px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            width: 90%; max-width: 450px; text-align: center;
        }
        .lang-toggle {
            position: absolute; top: 15px; right: 20px;
            background: #eee; border: none; padding: 5px 12px;
            border-radius: 20px; font-size: 0.7rem; cursor: pointer; font-weight: bold;
        }
        .tabs { display: flex; margin-bottom: 1.5rem; border-bottom: 2px solid #eee; margin-top: 10px; }
        .tab { flex: 1; padding: 12px; cursor: pointer; color: #999; font-weight: bold; }
        .tab.active { color: #007bff; border-bottom: 2px solid #007bff; }
        .content { display: none; }
        .content.active { display: block; }
        .input-group { margin-bottom: 1rem; text-align: left; }
        label { display: block; font-size: 0.75rem; color: #666; margin-bottom: 5px; font-weight: bold; }
        .search-input { width: 100%; padding: 10px; border: 1px solid #eee; border-radius: 8px 8px 0 0; font-size: 0.85rem; box-sizing: border-box; background: #fafafa; outline: none; }
        select, input[type="number"] { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px; font-size: 1rem; box-sizing: border-box; background: white; }
        .has-search select { border-radius: 0 0 10px 10px; border-top: none; }
        button.main-btn { width: 100%; padding: 15px; background: #007bff; color: white; border: none; border-radius: 10px; font-size: 1.1rem; cursor: pointer; margin-top: 10px; font-weight: bold; }
        .result-box { margin-top: 1.2rem; padding: 1.2rem; background: #f0f7ff; border-radius: 12px; font-size: 1.1rem; font-weight: bold; }
        #clockList { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 1rem; max-height: 250px; overflow-y: auto; padding: 5px; }
        .clock-card { background: #f8f9fa; padding: 12px; border-radius: 15px; border: 1px solid #eee; position: relative; text-align: left; }
        .clock-city { font-size: 0.95rem; font-weight: bold; }
        .clock-country { font-size: 0.65rem; color: #888; }
        .clock-time { font-size: 1.3rem; font-weight: bold; color: #007bff; font-family: monospace; margin-top: 5px; }
        .remove-btn { background: #ff4d4d; color: white; border: none; border-radius: 50%; width: 22px; height: 22px; cursor: pointer; position: absolute; top: -8px; right: -8px; }
    </style>
</head>
<body>

<div class="container">
    <button class="lang-toggle" onclick="toggleLanguage()" id="langBtn">EN / JP</button>
    <div class="tabs">
        <div id="tab-curr" class="tab active" onclick="showTab('currency')" data-i18n="tab_curr">通貨換算</div>
        <div id="tab-time" class="tab" onclick="showTab('time')" data-i18n="tab_time">世界時計</div>
    </div>

    <div id="currency" class="content active">
